<!doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- jquery/jqueru-ui CDMs -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js" integrity="sha256-xH4q8N0pEzrZMaRmd7gQVcTZiFei+HfRTBPJ1OGXC0k=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js" integrity="sha512-UXumZrZNiOwnTcZSHLOfcTs0aos2MzBWHXOHOuB0J/R44QB0dwY5JgfbvljXcklVf65Gc4El6RjZ+lnwd2az2g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- CSS link -->
    <link rel="stylesheet" href="style.css">

    <title>코코리 컬러게임</title>

</head>

<body>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <header>

    </header>

    <main>

        <header>
            <nav class="navbar navbar-expand-md navbar-dark bg-dark" aria-label="Eighth navbar example">
                <div class="container">
                    <a class="navbar-brand" href="#">Container</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample07" aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarsExample07">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="#">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Link</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link disabled">Disabled</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="dropdown07" data-bs-toggle="dropdown" aria-expanded="false">Dropdown</a>
                                <ul class="dropdown-menu" aria-labelledby="dropdown07">
                                    <li><a class="dropdown-item" href="#">Action</a></li>
                                    <li><a class="dropdown-item" href="#">Another action</a></li>
                                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

        <article id="main_page" class="container py-2" style="display: block;">

            <div class="row">
                <p class="fs-3 text-center">색채 판별력 테스트</p>
            </div>

            <div class="row">
                <p class="text-center" style="font-size: 0.8rem">
                    (내용이 들어가야 되는 곳입니다. 어떤 말을 쓰면 좋을까요? 다같이 고민해봅시다.)
                </p>
            </div>

            <div class="row">
                <button class="col align-self-center next" onclick="genClrWheel20()">
                    다음으로!
                </button>
            </div>

        </article>

        <article id="wait_page" class="container py-5" style="background-color: #ddd;">

            <div class="row">
                <p class="fs-3 text-center" style="padding-top: 10vh;">색상 테스트</p>
            </div>

            <div class="row">
                <p class="fs-6 text-center">
                    (내용이 들어가야 되는 곳입니다. 어떤 말을 쓰면 좋을까요? 다같이 고민해봅시다.)
                </p>
            </div>

            <div class="row">
                <button class="col align-self-center next test_begin" onclick="showClrWheel20()">
                    색상 테스트 시작
                </button>
            </div>

        </article>

        <article id="hue_test" class="container">

            <div class="row">
                <p class="fs-5 text-center in_game_text">색상 테스트</p>
            </div>

            <div class="row">
                <p class="text-center in_game_text" style="font-size: 0.7rem;">
                    색상을 부드럽게 이어주세요
                </p>
            </div>

            <div class="row">
                <p id="timer" class="fs-6 text-center in_game_text">
                    0초
                </p>
            </div>

            <div class="row">
                <div class="col-5 color_wheel">
                    <div class="lollipop">
                        <div class="pop"></div>
                        <div class="lolli"></div>
                    </div>
                </div>
                <div class="col-7 color_box">

                </div>
            </div>

            <div class="row">
                <button class="col align-self-center test_submit">
                    제출!
                </button>
            </div>

        </article>

        <footer>

        </footer>

    </main>



    <script>
        // next button
        $('.next').click(function() {
            clicked_article = $(this).closest("article");
            clicked_article.fadeOut(500);
            clicked_article.next().fadeIn(700);
        });

        // timer start
        let start;
        $('.test_begin').click(function() {
            start = new Date();
            let time = 0;
            let timer = setInterval(function() {
                time++;
                document.getElementById("timer").innerHTML = time + "초";
            }, 1000);
        });

        // generate n show color wheel (20)
        let lollipops = new Array();

        function genClrWheel20() {
            lollipops[0] = $(".lollipop").eq(0);
            for (let index = 1; index <= 20; index++) {
                lollipops[index] = lollipops[index - 1].clone(true);
                $(".color_wheel:first").append(lollipops[index]);
                lollipops[index].css({
                    "transform": "rotate(" + (index * 18 + 90) + "deg)"
                });
            }
            lollipops[0].css("display", "none");
        }

        function showClrWheel20() {
            let index = 1;
            let loop = setInterval(function() {
                lollipops[index].animate({
                    opacity: 1
                }, 80);
                if (index == 1) {
                    lollipops[index].find(".pop").css("background-color", "#fe0000");
                }
                if (index == 9) {
                    lollipops[index].find(".pop").css("background-color", "#0511f1");
                }
                if (index == 13) {
                    lollipops[index].find(".pop").css("background-color", "#009900");
                }
                if (index >= 20) {
                    clearInterval(loop);
                }
                index++;
            }, 50);


        }
    </script>
    <script type="module" src="polygons.js"></script>

</body>

</html>